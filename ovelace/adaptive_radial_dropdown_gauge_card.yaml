type: vertical-stack
cards:
  ##########################################################
  # COMPACT SNAPSHOT
  ##########################################################
  - type: custom:apexcharts-card
    chart_type: radialBar
    header:
      show: true
      title: Comparison Snapshot
      show_states: true
      colorize_states: true

    all_series_config:
      min: 0
      max: 100

    series:
      - entity: sensor.example_a
        name: Source A
        color: "#FF9F1C"
      - entity: sensor.example_b
        name: Source B
        color: "#1E90FF"
      - entity: sensor.example_c
        name: Source C
        color: "#00C851"

    apex_config:
      chart:
        height: 70
        background: transparent
        foreColor: "#E5E7EB"

      stroke:
        lineCap: round
        width: 1

      plotOptions:
        radialBar:
          startAngle: -150
          endAngle: 150
          hollow:
            size: 6%
          track:
            background: transparent
          dataLabels:
            name:
              show: false
            value:
              show: false

  ##########################################################
  # CHEVRON TOGGLE
  ##########################################################
  - type: custom:button-card
    entity: input_boolean.radial_gauge_expanded
    icon: |
      [[[
        return entity.state === 'on'
          ? 'mdi:chevron-up'
          : 'mdi:chevron-down';
      ]]]
    tap_action:
      action: toggle
    show_name: false
    show_state: false

  ##########################################################
  # EXPANDED VIEW
  ##########################################################
  - type: conditional
    conditions:
      - entity: input_boolean.radial_gauge_expanded
        state: "on"
    card:
      type: custom:apexcharts-card
      chart_type: radialBar
      all_series_config:
        min: 0
        max: 100

      series:
        - entity: sensor.example_a
          name: Source A
        - entity: sensor.example_b
          name: Source B
        - entity: sensor.example_c
          name: Source C

      apex_config:
        chart:
          height: 320
          background: transparent
          foreColor: "#E5E7EB"

        plotOptions:
          radialBar:
            hollow:
              size: 38%
            track:
              strokeWidth: 55%
            dataLabels:
              value:
                show: true
                formatter: |
                  function (val) {
                    return Math.round(val);
                  }
